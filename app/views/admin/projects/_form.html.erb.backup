<!-- Scaffolding generated by Casein v5.1.1.5 -->

<%= link_to_add_fields "Upload files", f, :uploads%>

<h2>Awards</h2>
<div class="row">
	<div class="col-lg-6">
  <%= f.fields_for :awards do |builder| %>
      <%= render "form_for_awards", f:builder %>
  <% end %>
  </div>
</div>

<%= link_to_add_fields "Add Awards", f, :awards %>


<h2>Bib</h2>
<div class="row">
	<div class="col-lg-6">
  <%= f.fields_for :bibliography_items do |builder| %>
      <%= render "form_for_awards", f:builder %>
  <% end %>
  </div>
</div>
<%= link_to_add_fields "Add Bibs", f, :bibliography_items %>

<div class="row section">
  <h2>section / type </h2>
  <%=  f.collection_select, :project, :section_id, Section.all.select{|sec| !sec.projects.empty?}, :id, :title %>

</div>

<div class="row">
  <%= hidden_field_tag "project[project_type_ids][]", nil %>
  <% ProjectType.roots.group_by{|pt| pt.section}.each do |section, project_types| %>
    <div class='types <%= "section" + section.id.to_s %>'>
      <h3><%= section.title %></h3>
      <% project_types.each do |project_type| %>
        <div class="type">
          <%= check_box_tag "project[project_type_ids][]", project_type.id, f.object.project_type_ids.include?(project_type.id), id: dom_id(project_type) %>
          <%= label_tag dom_id(project_type), project_type.title %><br>

          <% project_type.children.each do |child| %>
            <div class="subtype">
              &nbsp;&nbsp;&nbsp;&nbsp;<%= check_box_tag "project[project_type_ids][]", child.id, f.object.project_type_ids.include?(child.id), id: dom_id(child) %>
            <%= label_tag dom_id(child), child.title %><br>
            </div>
          <% end %>
        </div>
      <% end %>

    </div>
  <% end %>

</div>



<div class="row">
  <h2>Images</h2>

  <% f.object.uploads.group_by{|upload| upload.file_type}.each do |type, upload_group| %>
    <h1><%= type.title %></h1>
    <%= f.fields_for :uploads, upload_group.sort_by{|i| i.rank} do |builder| %>
      <div class="row">
        <div class="col-sm-2">
          <%= image_tag builder.object.name.thumb, class: "img-responsive" %>
        </div>
        <div class="col-sm-10">
          <%= builder.number_field :rank, size: 3 %>
          <br \>
          <%= builder.collection_select:file_type_id, FileType.all, :id, :title, prompt: "Select a type..." %>
          <br \>
          show? <%= builder.check_box :in_gallery %>
          <br \>
          delete? <%= builder.check_box :_destroy %>
      </div>
    </div>
  <% end %>
<% end %>

</div>


<h2>Roles</h2>
<div class="row">
	<div class="col-lg-6">
  <%= f.fields_for :roles do |builder| %>
      <%= render "form_for_roles", f:builder %>
  <% end %>
  </div>
</div>

<%= link_to_add_fields "Add Role", f, :roles %>

<h2>Other Stuff</h2>
<div class="row">
	<div class="col-lg-6">
		<%= f.text_field:title %>
	</div>

	<div class="col-lg-6">
    <% if f.object && f.object.primary_image %>
    <%= image_tag f.object.primary_image.name_url, class: "img-responsive" %>
  <% end %>
	</div>

</div>

<div class="row">
  <div class="col-lg-12">
    <%= casein_text_area f, f.object, :overview, rows: "8" %>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    <%= casein_text_area f, f.object, :description, rows: "20" %>
  </div>
  <div class="col-lg-12">
    <%= casein_text_area f, f.object, :program %>
  </div>
</div>

<h2>details</h2>

<div class="row">
  <div class="col-md-6">
    <%= f.text_field :client %>
  </div>
  <div class="col-md-6">
    <%= f.text_field :size %>
  </div>

  <div class="col-md-6">
    <%= f.text_field :height %>
  </div>

  <div class="col-md-6">
    <%= f.text_field :site_area %>
  </div>
  <div class="col-md-6">
    <%= f.text_field :lat %>
  </div>
  <div class="col-md-6">
    <%= f.text_field :lon %>
  </div>
  <div class="col-md-6">
    <%= f.text_field :street_address %>
  </div>
  <div class="col-md-6">
    <%= f.text_field :zip %>
  </div>
</div>

<h2>dates</h2>
<div class="row">
  <div class="col-md-6">
    <%= casein_date_field f, f.object, :design_sdate %>
  </div>
  <div class="col-md-6">
    <%= casein_date_field f, f.object, :design_sdate %>
  </div>
  <div class="col-md-6">
    <%= casein_date_field f, f.object, :constr_sdate %>
  </div>
  <div class="col-md-6">
    <%= casein_date_field f, f.object, :constr_edate %>
  </div>
  <div class="col-md-6">
    <%= casein_date_field f, f.object, :open_date %>
  </div>
  <div class="col-md-6">
    <%= casein_date_field f, f.object, :close_date %>
  </div>
</div>

