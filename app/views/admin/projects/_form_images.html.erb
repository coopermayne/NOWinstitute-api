<div class="row">

  <h2>Images</h2>

  <% f.object.uploads.select{|u| u.is_image}.group_by{|upload| upload.file_type}.each do |type, upload_group| %>
    <h1><%= type.title %></h1>
    <table class='table table-condensed'>
      <thead>
        <tr>
          <th>rank</th>
        </tr>
      </thead>
        <%= f.fields_for :uploads, upload_group.sort_by{|i| i.rank} do |builder| %>
          <tr>

            <td><%= builder.input :rank, label:false, :input_html => {:style => 'width: 65px'}  %></td>

            <td>
              <a class="btn" rel="popover" data-img=<%= builder.object.name.mobile.url %>>
                <%= image_tag builder.object.name.mobile, class: "img-responsive thumby" %>
              </a>
            </td>

            <td><%= builder.input :file_type_id, collection: FileType.all, prompt: "Select a type...", label: false, :input_html => {:style => 'width: 250px'}  %></td>

            <td>
              <div class='col-md-6'> show? <%= builder.check_box :in_gallery %> </div>
              <div class='col-md-6'> delete? <%= builder.check_box :_destroy %> </div>
            </td>

          </tr>
        <% end %>

    </table>
  <% end %>
</div>
